!function(a,b,c){"use strict";L.Toolbar=L.Class.extend({statics:{baseClass:"leaflet-toolbar"},includes:L.Mixin.Events,options:{className:"",filter:function(){return!0},actions:{}},initialize:function(a,b){L.setOptions(this,b),this._actions=a||[]},addTo:function(a){return this._arguments=[].slice.call(arguments),a.addLayer(this),this},onAdd:function(){},appendToContainer:function(a){var b,c,d,e=this.constructor.baseClass+"-"+this._calculateDepth(),f=e+" "+this.options.className,g=this._actions.length;for(this._container=a,this._ul=L.DomUtil.create("ul",f,a),L.DomEvent.on(this._ul,"click",L.DomEvent.stopPropagation),d=0;g>d;d++)b=this._getActionConstructor(this._actions[d]),c=new b,c._createIcon(this,this._ul,this._arguments)},_getActionConstructor:function(a){var b=this._arguments,c=a.prototype.type,d=this.options.actions[c]?this.options.actions[c]:{},e=this;return a.extend({options:L.extend({},a.prototype.options,d),initialize:function(){a.prototype.initialize.apply(this,b)},enable:function(){e._active&&e._active.disable(),e._active=this,a.prototype.enable.call(this)}})},hide:function(){this._ul.style.display="none"},show:function(){this._ul.style.display="block"},_calculateDepth:function(){for(var a=0,b=this.parentToolbar;b;)a+=1,b=b.parentToolbar;return a}}),L.ToolbarAction=L.Handler.extend({statics:{baseClass:"leaflet-toolbar-icon"},options:{toolbarIcon:{html:"",className:"",hideOnClick:!1,tooltip:""},subToolbar:new L.Toolbar},initialize:function(a){var b=L.ToolbarAction.prototype.options.toolbarIcon;L.setOptions(this,a),this.options.toolbarIcon=L.extend({},b,this.options.toolbarIcon)},enable:function(){var a=this.options.subToolbar;this._enabled||(this._enabled=!0,this.addHooks&&this.addHooks(),a._actions.length>0&&a.show())},disable:function(){var a=this.options.subToolbar;this._enabled&&(this._enabled=!1,this.removeHooks&&this.removeHooks(),a._actions.length>0&&a.hide())},_createIcon:function(a,b,c){var d=this.options.toolbarIcon;this.toolbar=a,this._icon=L.DomUtil.create("li","",b),this._link=L.DomUtil.create("a","",this._icon),this._link.innerHTML=d.html,this._link.setAttribute("href","#"),this._link.setAttribute("title",d.tooltip),L.DomUtil.addClass(this._link,this.constructor.baseClass),d.className&&L.DomUtil.addClass(this._link,d.className),L.DomEvent.on(this._link,"click",this.enable,this),this._addSubToolbar(a,this._icon,c)},_addSubToolbar:function(a,b,c){var d=this.options.subToolbar;d.parentToolbar=a,d._actions.length>0&&(c=[].slice.call(c),c.push(this),d.addTo.apply(d,c),d.appendToContainer(b))}}),L.ToolbarAction.extendOptions=function(a){return this.extend({options:a})},L.ToolbarAction.simpleAction=function(a,b){return L.ToolbarAction.extend({options:b,addHooks:function(){a(),this.disable()}})},L.Toolbar.Control=L.Toolbar.extend({statics:{baseClass:"leaflet-control-toolbar "+L.Toolbar.baseClass},initialize:function(a,b){L.Toolbar.prototype.initialize.call(this,a,b),this._control=new L.Control.Toolbar(this.options)},onAdd:function(a){this._control.addTo(a),this.appendToContainer(this._control.getContainer())},onRemove:function(a){this._control.removeFrom(a)}}),L.Control.Toolbar=L.Control.extend({onAdd:function(){return L.DomUtil.create("div","")}}),L.Toolbar.Popup=L.Toolbar.extend({statics:{baseClass:"leaflet-popup-toolbar "+L.Toolbar.baseClass},initialize:function(a,b,c){L.Toolbar.prototype.initialize.call(this,b,c);var d=L.extend(this.options,{icon:new L.DivIcon({html:"",className:this.options.className})});this._marker=new L.Marker(a,d)},onAdd:function(a){this._map=a,this._marker.addTo(a),this.appendToContainer(this._marker._icon),this._setStyles()},onRemove:function(a){a.removeLayer(this._marker),delete this._map},setLatLng:function(a){return this._marker.setLatLng(a),this},_setStyles:function(){for(var a,b,d,e=this._container,f=this._ul,g=f.querySelectorAll(".leaflet-toolbar-icon"),h=[],i=0,j=0,k=g.length;k>j;j++)g[j].parentNode.parentNode===f&&(h.push(parseInt(L.DomUtil.getStyle(g[j],"height"),10)),i+=Math.ceil(parseFloat(L.DomUtil.getStyle(g[j],"width"))));f.style.width=i+"px",this._tipContainer=L.DomUtil.create("div","leaflet-toolbar-tip-container",e),this._tipContainer.style.width=i+"px",this._tip=L.DomUtil.create("div","leaflet-toolbar-tip",this._tipContainer),a=Math.max.apply(c,h),b=parseInt(L.DomUtil.getStyle(this._tip,"width"),10),d=new L.Point(i/2,a+.7071*b),e.style.marginLeft=-d.x+"px",e.style.marginTop=-d.y+"px"}})}(window,document);